{% extends "base.html" %}

{% block title %}Альбом - HendalHost{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>Ваш альбом</h1>

    <div class="mb-3">
        <p>Поделитесь этой страницей: <a href="{{ request.url }}" class="text-decoration-underline">{{ request.url | truncate(30) }}</a>
        <button class="btn btn-sm btn-outline-primary ms-2" onclick="copyToClipboard('{{ request.url }}')">Копировать</button>
    </div>

    <div class="row">
        {% for img in images %}
        <div class="col-md-4 mb-3">
            <div class="card">
                <div class="card-body">
                    <p>Ссылка: <a href="{{ img }}" class="text-decoration-underline">{{ img | truncate(30) }}</a></p>
                    <button class="btn btn-sm btn-outline-primary me-2" onclick="copyToClipboard('{{ img }}')">Копировать</button>
                    <a href="{{ img }}" class="btn btn-sm btn-outline-secondary" download>Скачать</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-3">
        <button class="btn btn-primary">Загрузить еще</button>
    </div>
</div>

<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        alert('Ссылка скопирована в буфер обмена!');
    }).catch(err => {
        console.error('Ошибка копирования: ', err);
        alert('Ошибка при копировании ссылки');
    });
}
</script>
{% endblock %}